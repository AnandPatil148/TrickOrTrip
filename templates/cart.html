{% extends "base.html" %}
{% block content %}
<h2 class="text-2xl font-bold mb-4 text-center">Your Cart</h2>

{% if products %}
  <ul class="space-y-3">
    {% for p in products %}
      <li class="flex items-center justify-between border p-3 rounded-lg shadow-sm hover:shadow-md transition">
        <div>
          <p class="font-semibold text-lg">{{ p[2] }}</p>
          <p class="text-gray-600 text-sm">₹{{ p[4] }} /day</p>
        </div>

        <form method="POST" class="flex items-center">
          <input type="hidden" name="remove_pid" value="{{ p[0] }}">
          <button type="submit" class="text-red-500 hover:text-red-700 text-xl" title="Remove from cart">
            🗑️
          </button>
        </form>
      </li>
    {% endfor %}
  </ul>

  <div class="mt-6 text-center">
    <p class="text-lg font-semibold">Total: ₹{{ total }}</p>
    <p class="text-gray-600">Safety Deposit: ₹{{ deposit }}</p>
    <form method="POST" action="/payment_success">
      <button type="submit" class="mt-3 bg-purple-500 text-white px-6 py-2 rounded hover:bg-purple-600 transition">
        Proceed to Pay
      </button>
    </form>
    <!-- <button class="mt-3 bg-purple-500 text-white px-6 py-2 rounded hover:bg-purple-600 transition" onclick="location.href='/payment_success'">Proceed to Pay</button> -->
  </div>

{% else %}
  <p class="text-center text-gray-500">Your cart is empty 💤</p>
{% endif %}

<a href="/shop" class="block text-center mt-4 text-blue-600 hover:underline">← Continue Shopping</a>
{% endblock %}
